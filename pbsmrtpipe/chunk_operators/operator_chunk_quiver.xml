<?xml version="1.0" encoding="utf-8" ?>
<chunk-operator id="pbsmrtpipe.operators.chunk_call_variants">

    <task-id>pbsmrtpipe.tasks.call_variants_with_fastx</task-id>

    <scatter>
        <scatter-task-id>pbsmrtpipe.tasks.call_variants_with_fastx_scatter</scatter-task-id>
        <chunks>
            <chunk out="$chunk.movie_fofn_id" in="pbsmrtpipe.tasks.call_variants_with_fastx:0"/>
            <chunk out="$chunk.rgn_fofn_id" in="pbsmrtpipe.tasks.call_variants_with_fastx:1"/>
            <chunk out="$chunk.ref_id" in="pbsmrtpipe.tasks.call_variants_with_fastx:2" />
        </chunks>
    </scatter>
    <!-- Define the Gather Mechanism -->
    <gather>
        <chunks>
            <chunk>
                <gather-task-id>pbsmrtpipe.tasks.gather_gff</gather-task-id>
                <chunk-key>$chunk.gff_id</chunk-key>
                <task-output>pbsmrtpipe.tasks.call_variants_with_fastx:0</task-output>
            </chunk>
             <chunk>
                <gather-task-id>pbsmrtpipe.tasks.gather_fasta</gather-task-id>
                <chunk-key>$chunk.fasta_id</chunk-key>
                <task-output>pbsmrtpipe.tasks.call_variants_with_fastx:1</task-output>
            </chunk>
            <chunk>
                <gather-task-id>pbsmrtpipe.tasks.gather_fastq</gather-task-id>
                <chunk-key>$chunk.fastq_id</chunk-key>
                <task-output>pbsmrtpipe.tasks.call_variants_with_fastx:1</task-output>
            </chunk>
        </chunks>
    </gather>
</chunk-operator>